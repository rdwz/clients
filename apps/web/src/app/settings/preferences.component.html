<app-header></app-header>

<bit-container>
  <p bitTypography="body1">{{ "preferencesDesc" | i18n }}</p>
  <form [formGroup]="form" [bitSubmit]="submit">
    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
      <div class="tw-col-span-6">
        <app-callout type="info" *ngIf="vaultTimeoutPolicyCallout | async as policy">
          <span *ngIf="policy.timeout && policy.action">
            {{
              "vaultTimeoutPolicyWithActionInEffect"
                | i18n: policy.timeout.hours : policy.timeout.minutes : (policy.action | i18n)
            }}
          </span>
          <span *ngIf="policy.timeout && !policy.action">
            {{ "vaultTimeoutPolicyInEffect" | i18n: policy.timeout.hours : policy.timeout.minutes }}
          </span>
          <span *ngIf="!policy.timeout && policy.action">
            {{ "vaultTimeoutActionPolicyInEffect" | i18n: (policy.action | i18n) }}
          </span>
        </app-callout>
        <app-vault-timeout-input
          [vaultTimeoutOptions]="vaultTimeoutOptions"
          [formControl]="form.controls.vaultTimeout"
          ngDefaultControl
        >
        </app-vault-timeout-input>
      </div>
    </div>
    <ng-container *ngIf="availableVaultTimeoutActions$ | async as availableVaultTimeoutActions">
      <div *ngIf="availableVaultTimeoutActions.length > 1"></div>
      <bit-radio-group formControlName="vaultTimeoutAction">
        <bit-label>{{ "vaultTimeoutAction" | i18n }}</bit-label>
        <bit-radio-button
          *ngIf="availableVaultTimeoutActions.includes(VaultTimeoutAction.Lock)"
          id="vaultTimeoutActionLock"
          [value]="VaultTimeoutAction.Lock"
        >
          <bit-label>{{ "lock" | i18n }}</bit-label>
          <bit-hint class="tw-text-sm">{{ "vaultTimeoutActionLockDesc" | i18n }}</bit-hint>
        </bit-radio-button>
        <bit-radio-button
          *ngIf="availableVaultTimeoutActions.includes(VaultTimeoutAction.LogOut)"
          id="vaultTimeoutActionLogOut"
          [value]="VaultTimeoutAction.LogOut"
        >
          <bit-label>{{ "logOut" | i18n }}</bit-label>
          <bit-hint class="tw-text-sm">{{ "vaultTimeoutActionLogOutDesc" | i18n }}</bit-hint>
        </bit-radio-button>
      </bit-radio-group>
    </ng-container>
    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
      <div class="tw-col-span-6">
        <bit-form-field>
          <bit-label
            >{{ "language" | i18n }}
            <a
              bitLink
              class="tw-float-right"
              href="https://bitwarden.com/help/localization/"
              target="_blank"
              rel="noreferrer"
              appA11yTitle="{{ 'learnMore' | i18n }}"
            >
              <i class="bwi bwi-question-circle" aria-hidden="true"></i>
            </a>
          </bit-label>
          <bit-select formControlName="locale" id="locale">
            <bit-option
              *ngFor="let o of localeOptions"
              [value]="o.value"
              [label]="o.name"
            ></bit-option>
          </bit-select>
          <bit-hint class="tw-text-sm">{{ "languageDesc" | i18n }}</bit-hint>
        </bit-form-field>
      </div>
    </div>
    <div>
      <bit-form-control>
        <input type="checkbox" bitCheckbox formControlName="enableFavicons" />
        <bit-label
          >{{ "enableFavicon" | i18n }}
          <a
            bitLink
            href="https://bitwarden.com/help/website-icons/"
            target="_blank"
            rel="noreferrer"
            appA11yTitle="{{ 'learnMore' | i18n }}"
          >
            <i class="bwi bwi-question-circle" aria-hidden="true"></i>
          </a>
        </bit-label>
        <bit-hint class="tw-text-sm">{{ "faviconDesc" | i18n }}</bit-hint>
      </bit-form-control>
    </div>
    <div class="tw-grid tw-grid-cols-12 tw-gap-4">
      <div class="tw-col-span-6">
        <bit-form-field>
          <bit-label>{{ "theme" | i18n }}</bit-label>
          <bit-select formControlName="theme" id="theme">
            <bit-option
              *ngFor="let o of themeOptions"
              [value]="o.value"
              [label]="o.name"
            ></bit-option>
          </bit-select>
          <bit-hint class="tw-text-sm">{{ "themeDesc" | i18n }}</bit-hint>
        </bit-form-field>
      </div>
    </div>
    <button bitButton bitFormButton type="submit" buttonType="primary">{{ "save" | i18n }}</button>
  </form>
</bit-container>
